<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYSEC CTF</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<div class="nav" id="nav">
    <ul>
        <li><a href="#">栏目1</a></li>
        <li><a href="#">栏目2</a></li>
        <li><a href="#">栏目3</a></li>
        <li><a href="#">栏目4</a></li>
        <li><a href="#">栏目5</a></li>
        <li><a href="/login">登录</a></li>
    </ul>
</div>
<nav class="navbar navbar-expand-md navbar-dark fixed-top">
    <a class="navbar-brand" href="/">NYSEC CTF</a>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/home">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/challenges">Challenges</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/link">Link</a>
            </li>
        </ul>
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit" style="border-radius: 50% ; height: 40px;width: 40px" onclick="toggleNav()"></button>    </div>
</nav>

<main role="main" class="container" id="main-content">
    <!-- Change onclick to use a variable -->
    <div id="challengeLinksContainer"></div>
</main>

<script>
    // Define a variable to store the current challenge number
    let num = 5;

    // Function to update the challenge links
    function updateChallengeLinks() {
        const challengeLinksContainer = document.getElementById('challengeLinksContainer');
        challengeLinksContainer.innerHTML = ''; // Clear previous links
        for (let i = 1; i <= num; i++) {
            const link = document.createElement('a');
            link.className = 'nav-link';
            link.style.color = '#c82333';
            link.style.height = '10px';
            link.textContent = 'Challenges' + i;
            link.onclick = function() {
                docker_pull(i);
            };
            challengeLinksContainer.appendChild(link);
            challengeLinksContainer.appendChild(document.createElement('br')); // Add line break after each link
        }
    }

    // Function to handle docker pull
    function docker_pull(docker_num) {
        const postData = {
            isPull: "True",
            serial: docker_num
        };

        fetch('/start', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(postData)
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log('POST request succeeded with JSON response:', data);
            })
            .catch(error => {
                console.error('There was a problem with the POST request:', error);
            });
    }

    // Call the update function initially
    updateChallengeLinks();
</script>
<script src="/js/styles.js"></script>
<script src="/js/user.js"></script>
</body>
</html>
